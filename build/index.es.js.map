{"version":3,"file":"index.es.js","sources":["../src/DynamiCSS.ts"],"sourcesContent":["import { DynamicSheet, DynamicSheetRule } from \"./DynamicStyle/DynamicStyle\";\r\n\r\nexport namespace DynamiCSS {\r\n\r\n    export function insertStyleSheet(dynamicSheet: DynamicSheet): string {\r\n        let result_id = \"\";\r\n        if (typeof window === \"undefined\") {\r\n            return \"\";\r\n        }\r\n        if (!dynamicSheet) {\r\n            return \"\";\r\n        }\r\n        //if already exists\r\n        if (document.getElementById(dynamicSheet.id)) {\r\n            return dynamicSheet.id;\r\n        }\r\n        result_id = dynamicSheet.id;\r\n        var styleSheet: HTMLStyleElement = document.createElement(\"style\");\r\n        styleSheet.id = result_id;\r\n        styleSheet.setAttribute(\"type\", \"text/css\");\r\n        const contetRaw: string = toRawStyleSheet(dynamicSheet.sheetRules || []);\r\n        styleSheet.textContent = contetRaw;\r\n        const appendResult: HTMLStyleElement = document.head.appendChild(styleSheet);\r\n        if (!appendResult) {\r\n            return \"\";\r\n        }\r\n\r\n        return result_id;\r\n    }\r\n    export function editStyleSheet(id: string, sheetRules: DynamicSheetRule[]): string {\r\n        let result_id = \"\";\r\n        if (typeof window === \"undefined\") {\r\n            return \"\";\r\n        }\r\n        if (!id || !sheetRules) {\r\n            return \"\";\r\n        }\r\n        //if dont exists yet\r\n        if (!document.getElementById(id)) {\r\n            return \"\";\r\n        }\r\n        result_id = id;\r\n        var styleSheet: HTMLStyleElement = document.createElement(\"style\");\r\n        styleSheet.id = result_id;\r\n        styleSheet.setAttribute(\"type\", \"text/css\");\r\n        styleSheet.textContent = toRawStyleSheet(sheetRules);\r\n        try {\r\n            document.head.appendChild(styleSheet);\r\n        } catch (error: any) {\r\n            return \"\";\r\n        }\r\n        return result_id;\r\n    }\r\n    export function removeStyleSheet(id: string): string {\r\n        let result_id = \"\";\r\n        if (!id) {\r\n            return \"\";\r\n        }\r\n        const htmlObject: HTMLElement = document.getElementById(id);\r\n        if (htmlObject) {\r\n            document.head.removeChild(htmlObject);\r\n            result_id = id;\r\n        }\r\n\r\n        return result_id;\r\n    }\r\n    export function existStyleSheet(id: string): boolean {\r\n\r\n        if (!id) {\r\n            return false;\r\n        }\r\n        const htmlObject: HTMLElement = document.getElementById(id);\r\n        if (htmlObject) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Determines whether a character is upperCase or not\r\n * @param str a character\r\n * @returns true if str contains a string character\r\n */\r\nfunction isUpper(character: string): boolean {\r\n    if (!character) return false;\r\n    return !/[a-z]/.test(character) && /[A-Z]/.test(character);\r\n}\r\n/**\r\n * Converts a rule with uppercase to a hyphen-lowercase version\r\n * @param rule the rule\r\n * @returns \r\n */\r\nfunction fromUpperCaseToHyphen(ruleLabel: string): string {\r\n    let result = \"\";\r\n    let charUpper = ' ';\r\n    let isupper: boolean = false;\r\n    for (let i = 0; i < ruleLabel.length; i++) {\r\n        const currentChar = ruleLabel[i];\r\n        if (isUpper(currentChar)) {\r\n            charUpper = currentChar;\r\n            isupper = true;\r\n            break;\r\n        }\r\n    }\r\n    //add hyphen\r\n    if (isupper) {\r\n        const parts: string[] = ruleLabel.split(charUpper);\r\n        result = `${parts[0]}-${charUpper.toLowerCase()}${parts[1]}`;\r\n    } else {\r\n        result = ruleLabel;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * \r\n * @param ruleLabel the rule\r\n * @returns true if the rule label corresponds to a pseudo class\r\n */\r\nfunction isPseudo(ruleLabel: string): boolean {\r\n    if (!ruleLabel) return false;\r\n    return ruleLabel.includes(\":\");\r\n}\r\n\r\nexport function makeRawRuleLabel(className: string): string {\r\n    let result = \"\";\r\n    const splitedClassName: string[] = className.trim().split(\" \");\r\n    //is composed classname?\r\n    if (splitedClassName.length > 1) {\r\n        for (let i = 0; i < splitedClassName.length; i++) {\r\n            result += `.${splitedClassName[i]}`;\r\n        }\r\n        result += `{\\n`;\r\n    } else {\r\n        result += `.${className}{\\n`;\r\n    }\r\n\r\n    return result;\r\n}\r\nexport function toRawStyleSheet(sheetRules: DynamicSheetRule[]): string {\r\n    if (!sheetRules) {\r\n        return \"\";\r\n    }\r\n    let rawStyleSheet: string = \"\";\r\n    let nestedPseudos: DynamicSheetRule[] = [];\r\n\r\n    for (let j = 0; j < sheetRules.length; j++) {\r\n\r\n        const currentRule: DynamicSheetRule = sheetRules[j];\r\n\r\n        let currnetRawRule: string = \"\";\r\n       // currnetRawRule += `.${currentRule.className}{\\n`;\r\n        currnetRawRule += makeRawRuleLabel(currentRule.className);\r\n\r\n        //list of labels for rules\r\n        const ruleskeys: string[] = Object.keys(currentRule.rules);\r\n\r\n        for (let i = 0; i < ruleskeys.length; i++) {\r\n            const currentKey = ruleskeys[i];\r\n\r\n            const styleLabel: string = fromUpperCaseToHyphen(currentKey);\r\n            //if a pseudo class found, separate it\r\n            if (isPseudo(styleLabel)) {\r\n\r\n                const pseudoClassName: string = currentRule.className + styleLabel;\r\n                nestedPseudos.push({ className: pseudoClassName, rules: (currentRule as any).rules[styleLabel] });\r\n            } else {\r\n                const styleRule: string = (currentRule.rules as any)[currentKey];\r\n                currnetRawRule += `\\t${styleLabel} : ${styleRule};\\n`;\r\n            }\r\n\r\n        }\r\n        currnetRawRule += `}\\n`;\r\n\r\n        rawStyleSheet += currnetRawRule;\r\n    }\r\n    //nested pseudos\r\n\r\n\r\n    for (let p = 0; p < nestedPseudos.length; p++) {\r\n        let currnetRawRule: string = \"\";\r\n        const currentRule: DynamicSheetRule = nestedPseudos[p];\r\n        const ruleskeys: string[] = Object.keys(currentRule.rules);\r\n        currnetRawRule += `.${currentRule.className}{\\n`;\r\n        for (let i = 0; i < ruleskeys.length; i++) {\r\n            const currentKey = ruleskeys[i];\r\n            const styleLabel: string = fromUpperCaseToHyphen(currentKey);\r\n            const styleRule: string = (currentRule.rules as any)[currentKey];\r\n            currnetRawRule += `\\t${styleLabel} : ${styleRule};\\n`;\r\n        }\r\n        currnetRawRule += `}\\n`;\r\n        rawStyleSheet += currnetRawRule;\r\n    }\r\n    return rawStyleSheet;\r\n}"],"names":[],"mappings":"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"}